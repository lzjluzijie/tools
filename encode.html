<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.4/css/bulma.min.css"
          integrity="sha256-8B1OaG0zT7uYA572S2xOxWACq9NXYPQ+U5kHPV1bJN4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.7.2/css/all.min.css"
          integrity="sha256-7V33osRIfrDP7o1DzMbHKTFApfEDTIyCywe0imdN8no=" crossorigin="anonymous">
    <title>Tools by Halulu</title>
    <meta name="keywords" content="哈陆lu,halulu,tools,online,hash">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-91028451-12"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-91028451-12');
    </script>

</head>
<body>
<nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <img alt="halulu" src="https://halu.lu/halulu.png" width="30" height="30"><strong>Tools</strong>
        </a>
    </div>

    <div id="navbar-menu" class="navbar-menu">
        <div class="navbar-start">
            <a class="navbar-item" id="navbar-hash" href="/hash.html">
                Hash
            </a>

            <a class="navbar-item" id="navbar-hash" href="/encode.html">
                Encode
            </a>
        </div>

        <div class="navbar-end">
            <a class="navbar-item" id="navbar-todo" href="/todo.html">
                TODO
            </a>

            <a class="navbar-item" id="navbar-halulu" href="https://halu.lu/"
               target="_blank">Halulu</a>

            <div class="navbar-item" id="navbar-github">
                <a href="https://github.com/lzjluzijie/tools">
                    <i class="fab fa-github fa-2x"></i>
                </a>
            </div>
        </div>
    </div>
</nav>
<section class="section" id="encode">
    <div class="container">
        <div class="columns">
            <div class="column is-2">
                <h2 id="title" class="title is-2">Encode</h2>
            </div>

            <div class="column is-10" style="text-align: center">
                <div id="encode-arrow" v-on:click="change">
                    <h2 class="subtitle is-2" style="display: inline">raw</h2>
                    <i class="fas fa-arrow-right fa-3x"></i>
                    <h2 class="subtitle is-2" style="display: inline">enc</h2>
                </div>

                <div id="decode-arrow" v-on:click="change" style="display: none">
                    <h2 class="subtitle is-2" style="display: inline">raw</h2>
                    <i class="fas fa-arrow-left fa-3x"></i>
                    <h2 class="subtitle is-2" style="display: inline">enc</h2>
                </div>
            </div>
        </div>

        <div class="columns">
            <div class="column is-2">
                <aside class="menu">
                    <ul class="menu-list">
                        <li v-on:click="click"><a class="encode-name is-active" data-encode-name="base64">Base64</a>
                        </li>
                        <li v-on:click="click"><a class="encode-name" data-encode-name="base64url">Base64 URL</a></li>
                        <li v-on:click="click"><a class="encode-name" data-encode-name="base58">Base58</a></li>
                        <li v-on:click="click"><a class="encode-name" data-encode-name="base36">Base36</a></li>
                        <li v-on:click="click"><a class="encode-name" data-encode-name="urlencode">URL Encoding</a></li>
                        <li v-on:click="click"><a class="encode-name" data-encode-name="hex">hex</a></li>
                    </ul>
                </aside>
            </div>

            <div class="column is-5">
                <textarea class="textarea" id="raw" v-model="raw"></textarea>
            </div>

            <div class="column is-5">
                <textarea class="textarea" id="enc" v-model="enc"
                          readonly></textarea>
            </div>
        </div>
    </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.8/dist/vue.min.js"
        integrity="sha256-GN7NvWruk083BKn+djXpMOuWnd9Rz70hQgF868IIyTU=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/simple-base@0.2.1/dist/simple-base.js"
        integrity="sha256-1D948U/obQtmywjjYk3OJpA2k+cvWhf/B07kkfqefPE=" crossorigin="anonymous"></script>
<script>
    function hexEncode(raw) {
        var arr = [];
        for (var n = 0, l = raw.length; n < l; n++) {
            var h = Number(raw.charCodeAt(n)).toString(16);
            arr.push(h);
        }
        return arr.join('');
    }

    function hexDecode(enc) {
        var hex = enc.toString();
        var raw = '';
        for (var n = 0; n < hex.length; n += 2) {
            raw += String.fromCharCode(parseInt(hex.substr(n, 2), 16));
        }
        return raw;
    }

    var encode = new Vue({
        el: '#encode',
        data: {
            raw: '',
            encodeName: 'base64',
            mode: 'encode',
        },
        computed: {
            enc: {
                get: function () {
                    let raw = this.raw;
                    let encodeName = this.encodeName;
                    let enc = "error!";

                    switch (encodeName) {
                        case "base64":
                            enc = window.btoa(raw);
                            break;
                        case "base64url":
                            enc = window.btoa(raw).replace(/\+/g, '-').replace(/\//g, '_').replace(/\=+$/, '');
                            break;
                        case "base58":
                            enc = SimpleBase.encode(raw, 58);
                            break;
                        case "base36":
                            enc = SimpleBase.encode(raw, 36);
                            break;
                        case "urlencode":
                            enc = encodeURIComponent(raw);
                            break;
                        case "hex":
                            enc = hexEncode(raw);
                            break;
                    }

                    return enc
                },
                set: function (enc) {
                    let encodeName = this.encodeName;
                    let raw = "error!";

                    switch (encodeName) {
                        case "base64":
                            raw = window.atob(enc);
                            break;
                        case "base64url":
                            raw = window.atob(enc.replace(/\+/g, '-').replace(/\//g, '_').replace(/\=+$/, ''));
                            break;
                        case "base58":
                            raw = SimpleBase.decode(enc, 58);
                            break;
                        case "base36":
                            raw = SimpleBase.decode(enc, 36);
                            break;
                        case "urlencode":
                            raw = decodeURIComponent(enc);
                            break;
                        case "hex":
                            raw = hexDecode(enc);
                            break;
                    }

                    this.raw = raw;
                    return raw
                },
            }
        },
        methods: {
            click: function (event) {
                let s = document.getElementsByClassName("encode-name");
                for (let i = 0; i < s.length; i++) {
                    s[i].classList.remove("is-active")
                }
                event.target.classList.add("is-active");

                let encodeName = event.target.getAttribute("data-encode-name");
                this.encodeName = encodeName;
            }
            ,
            change: function (event) {
                if (document.getElementById("decode-arrow").style.getPropertyValue("display") === "none") {
                    document.getElementById("title").innerText = "Decode";
                    document.getElementById("encode-arrow").style.setProperty("display", "none");
                    document.getElementById("decode-arrow").style.removeProperty("display");
                    document.getElementById("enc").removeAttribute("readonly");
                    document.getElementById("raw").setAttribute("readonly", "readonly")
                } else {
                    document.getElementById("title").innerText = "Encode";
                    document.getElementById("decode-arrow").style.setProperty("display", "none");
                    document.getElementById("encode-arrow").style.removeProperty("display");
                    document.getElementById("raw").removeAttribute("readonly");
                    document.getElementById("enc").setAttribute("readonly", "readonly")
                }
            }
        },
    });
</script>
</body>
</html>